(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{25282:(e,t,a)=>{Promise.resolve().then(a.bind(a,41057))},41057:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(95155),n=a(12115);function r(e){let{query:t}=e,[a,r]=(0,n.useState)([]);return((0,n.useEffect)(()=>{(async()=>{if(!t)return;let e=await fetch("/api/rag/search?q=".concat(encodeURIComponent(t)));e.ok&&r((await e.json()).results||[])})()},[t]),a.length)?(0,s.jsxs)("div",{className:"mt-2 text-xs",children:[(0,s.jsx)("div",{className:"text-gray-500 mb-1",children:"Sources:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:a.map((e,t)=>(0,s.jsxs)("a",{className:"underline",href:e.url||"#",target:"_blank",rel:"noreferrer",children:["[",t+1,"] ",e.title]},e.id))})]}):null}function l(){let[e,t]=(0,n.useState)([]),[a,l]=(0,n.useState)(""),[i,c]=(0,n.useState)("");async function o(a){let s=[...e,{role:"user",content:a}];t(s),c(a),l("");let n=localStorage.getItem("conversationId")||void 0,r=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:s,conversationId:n})}),i=r.headers.get("X-Conversation-Id");i&&localStorage.setItem("conversationId",i),t([...s,{role:"assistant",content:(await r.json()).text}])}return(0,s.jsxs)("div",{className:"container py-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold mb-2",children:"GENUINE™ Relationship Coach"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Warm, encouraging, non-judgmental, and actionable."}),(0,s.jsx)("div",{className:"card p-4 min-h-[300px]",children:e.map((e,t)=>(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:e.role}),(0,s.jsx)("div",{className:"whitespace-pre-wrap",children:e.content})]},t))}),(0,s.jsx)(r,{query:i}),(0,s.jsxs)("form",{className:"mt-3 flex gap-2",onSubmit:e=>{e.preventDefault(),a.trim()&&o(a.trim())},children:[(0,s.jsx)("input",{className:"flex-1 rounded-xl border border-gray-200 px-3 py-2",value:a,onChange:e=>l(e.target.value),placeholder:"Ask about a relationship or next step…"}),(0,s.jsx)("button",{className:"btn btn-primary",disabled:!a.trim(),children:"Send"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(25282)),_N_E=e.O()}]);